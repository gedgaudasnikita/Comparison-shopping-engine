<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Comparison-shopping-engine: C:/projects/myproject/Comparison-shopping-engine-backend/src/Server/Servers/HttpServer.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Comparison-shopping-engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b1cc8daff834f40454a90749845c9670.html">Comparison-shopping-engine-backend</a></li><li class="navelem"><a class="el" href="dir_900e92c582c055939d57d33f785521a1.html">src</a></li><li class="navelem"><a class="el" href="dir_7d9b3a1f1e37c55e03f70b262831721e.html">Server</a></li><li class="navelem"><a class="el" href="dir_dfa85f4f354a9d8403d4dca7364410fa.html">Servers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">HttpServer.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="HttpServer_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> Newtonsoft.Json;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceSystem.html">System</a>;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceSystem.html">System</a>.Collections.Generic;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceSystem.html">System</a>.Configuration;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceSystem.html">System</a>.IO;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceSystem.html">System</a>.Linq;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceSystem.html">System</a>.Net;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceSystem.html">System</a>.Net.Http;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceSystem.html">System</a>.Text;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceSystem.html">System</a>.Threading.Tasks;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceComparison__shopping__engine__backend.html">Comparison_shopping_engine_backend</a></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;{</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="classComparison__shopping__engine__backend_1_1HttpServer.html">   17</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html">HttpServer</a>: <a class="code" href="interfaceComparison__shopping__engine__backend_1_1IServer.html">IServer</a></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    {</div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="classComparison__shopping__engine__backend_1_1HttpServer.html#aee36ff238481fa37e18c41c57d0d81d3">   19</a></span>&#160;        <span class="keyword">private</span> HttpListener <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#aee36ff238481fa37e18c41c57d0d81d3">listener</a>;</div><div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a77be4aee856814f246cf132013fa9819">   20</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="interfaceComparison__shopping__engine__backend_1_1IRouter.html">IRouter</a> <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a77be4aee856814f246cf132013fa9819">router</a>;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a0d85429b6b5d8e7871a6c36e6333d6b2">   22</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a0d85429b6b5d8e7871a6c36e6333d6b2">HttpServer</a>(<a class="code" href="interfaceComparison__shopping__engine__backend_1_1IRouter.html">IRouter</a> _router)</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        {</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;            var rootUrlConfig = ConfigurationManager.AppSettings[<span class="stringliteral">&quot;serverURL&quot;</span>];</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;            <span class="keywordflow">if</span> (rootUrlConfig != null)</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;            {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                listener = <span class="keyword">new</span> HttpListener();</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                listener.Prefixes.Add(rootUrlConfig);</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                router = _router;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            }</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ConfigurationErrorsException(<span class="stringliteral">&quot;No server host URL configured.&quot;</span>);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            }</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        }</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a5957aa0d15061f2c6b7145cca4139d83">   42</a></span>&#160;        <span class="keyword">public</span> async <span class="keywordtype">void</span> <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a5957aa0d15061f2c6b7145cca4139d83">Start</a>()</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            listener.Start();</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            <span class="keywordflow">while</span> (listener.IsListening)</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                    var context = await listener.GetContextAsync();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#pragma warning disable CS4014 // Because this call is not awaited, execution of the current method continues before the call is completed</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                    Task.Factory.StartNew(() =&gt; <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a7a8c0234f295cad1413b0aff54c64a70">HandleConnection</a>(context));</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#pragma warning restore CS4014 // I regret doing so many things</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                <span class="keywordflow">catch</span> (ObjectDisposedException)</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                <span class="keywordflow">catch</span> (HttpListenerException)</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        </div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a7a8c0234f295cad1413b0aff54c64a70">   71</a></span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a7a8c0234f295cad1413b0aff54c64a70">HandleConnection</a>(HttpListenerContext ctx)</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="comment">//All the exception handling happenning in one function</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="comment">//The arrow function contains both retrieving the handler and invoking it</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a0814aca79d2d6c1940274d906e1aec57">MapExceptions</a>(</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                () =&gt; {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                    <span class="keywordflow">return</span> router.<a class="code" href="interfaceComparison__shopping__engine__backend_1_1IRouter.html#a9c5be4f0f9ea5e3b581a6bfcc959dd54">GetHandler</a>(</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                        ctx.Request.GetEndpoint(),</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                        <span class="keyword">new</span> HttpMethod(ctx.Request.HttpMethod)</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                    )</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                    (</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                        ctx.Request.InputStream,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                        ctx.Request.QueryString</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                    );</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                }, </div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                out <span class="keywordtype">int</span> statusCode, </div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                out Stream outputStream</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            );</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            ctx.Response.StatusCode = statusCode;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="keywordflow">if</span> (outputStream != null)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                outputStream.CopyTo(ctx.Response.OutputStream);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                outputStream.Close();</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            ctx.Response.Close();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a0814aca79d2d6c1940274d906e1aec57">  108</a></span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a0814aca79d2d6c1940274d906e1aec57">MapExceptions</a>(Func&lt;Stream&gt; handler, out <span class="keywordtype">int</span> statusCode, out Stream outputStream)</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                statusCode = (int)HttpStatusCode.OK;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                outputStream = handler();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">catch</span> (ArgumentException)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                statusCode = (int)HttpStatusCode.BadRequest;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                outputStream = <span class="keyword">new</span> MemoryStream(Encoding.UTF8.GetBytes(<span class="stringliteral">&quot;Wrong parameters&quot;</span>));</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">catch</span> (KeyNotFoundException)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                statusCode = (int)HttpStatusCode.NotFound;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                outputStream = <span class="keyword">new</span> MemoryStream(Encoding.UTF8.GetBytes(<span class="stringliteral">&quot;Wrong URL or method&quot;</span>));</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">catch</span> (JsonReaderException)</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                statusCode = (int)HttpStatusCode.BadRequest;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                outputStream = <span class="keyword">new</span> MemoryStream(Encoding.UTF8.GetBytes(<span class="stringliteral">&quot;Format error&quot;</span>));</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">catch</span> (Exception ex)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                Console.WriteLine(ex);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                statusCode = (int)HttpStatusCode.InternalServerError;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                outputStream = <span class="keyword">new</span> MemoryStream(Encoding.UTF8.GetBytes(<span class="stringliteral">&quot;Sorry but 500&quot;</span>));</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a6e2d745cdb7a7b983f861ed6a9a541a7">  138</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>()</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a8ad4348ef0f9969025bab397e7e27e26">  143</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classComparison__shopping__engine__backend_1_1HttpServer.html#a8ad4348ef0f9969025bab397e7e27e26">Dispose</a>(<span class="keywordtype">bool</span> disposing)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            listener.Close();</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div><div class="ttc" id="interfaceComparison__shopping__engine__backend_1_1IServer_html"><div class="ttname"><a href="interfaceComparison__shopping__engine__backend_1_1IServer.html">Comparison_shopping_engine_backend.IServer</a></div><div class="ttdoc">Implemented by the classes that aim to encapsulate the functionality of the server. The responsibilities of such classes include setting up the listeners, manage handling of the connections and handle the exceptions appropriately </div><div class="ttdef"><b>Definition:</b> <a href="IServer_8cs_source.html#l00014">IServer.cs:14</a></div></div>
<div class="ttc" id="classComparison__shopping__engine__backend_1_1HttpServer_html_aee36ff238481fa37e18c41c57d0d81d3"><div class="ttname"><a href="classComparison__shopping__engine__backend_1_1HttpServer.html#aee36ff238481fa37e18c41c57d0d81d3">Comparison_shopping_engine_backend.HttpServer.listener</a></div><div class="ttdeci">HttpListener listener</div><div class="ttdef"><b>Definition:</b> <a href="HttpServer_8cs_source.html#l00019">HttpServer.cs:19</a></div></div>
<div class="ttc" id="namespaceComparison__shopping__engine__backend_html"><div class="ttname"><a href="namespaceComparison__shopping__engine__backend.html">Comparison_shopping_engine_backend</a></div><div class="ttdef"><b>Definition:</b> <a href="ItemManager_8cs_source.html#l00014">ItemManager.cs:14</a></div></div>
<div class="ttc" id="classComparison__shopping__engine__backend_1_1HttpServer_html_a0814aca79d2d6c1940274d906e1aec57"><div class="ttname"><a href="classComparison__shopping__engine__backend_1_1HttpServer.html#a0814aca79d2d6c1940274d906e1aec57">Comparison_shopping_engine_backend.HttpServer.MapExceptions</a></div><div class="ttdeci">void MapExceptions(Func&lt; Stream &gt; handler, out int statusCode, out Stream outputStream)</div><div class="ttdoc">Contains the responses for every sort of exception case expected to possibly occur, and assigns them appropriately upon catching. </div><div class="ttdef"><b>Definition:</b> <a href="HttpServer_8cs_source.html#l00108">HttpServer.cs:108</a></div></div>
<div class="ttc" id="classComparison__shopping__engine__backend_1_1HttpServer_html_a7a8c0234f295cad1413b0aff54c64a70"><div class="ttname"><a href="classComparison__shopping__engine__backend_1_1HttpServer.html#a7a8c0234f295cad1413b0aff54c64a70">Comparison_shopping_engine_backend.HttpServer.HandleConnection</a></div><div class="ttdeci">void HandleConnection(HttpListenerContext ctx)</div><div class="ttdoc">A routine for handling every incoming request. Makes use of IRouter and handles the possible exceptio...</div><div class="ttdef"><b>Definition:</b> <a href="HttpServer_8cs_source.html#l00071">HttpServer.cs:71</a></div></div>
<div class="ttc" id="classComparison__shopping__engine__backend_1_1HttpServer_html"><div class="ttname"><a href="classComparison__shopping__engine__backend_1_1HttpServer.html">Comparison_shopping_engine_backend.HttpServer</a></div><div class="ttdoc">A barebones implementation of an HTTP server. Uses HttpListener and handles connections asynchronousl...</div><div class="ttdef"><b>Definition:</b> <a href="HttpServer_8cs_source.html#l00017">HttpServer.cs:17</a></div></div>
<div class="ttc" id="classComparison__shopping__engine__backend_1_1HttpServer_html_a6e2d745cdb7a7b983f861ed6a9a541a7"><div class="ttname"><a href="classComparison__shopping__engine__backend_1_1HttpServer.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Comparison_shopping_engine_backend.HttpServer.Dispose</a></div><div class="ttdeci">void Dispose()</div><div class="ttdef"><b>Definition:</b> <a href="HttpServer_8cs_source.html#l00138">HttpServer.cs:138</a></div></div>
<div class="ttc" id="interfaceComparison__shopping__engine__backend_1_1IRouter_html"><div class="ttname"><a href="interfaceComparison__shopping__engine__backend_1_1IRouter.html">Comparison_shopping_engine_backend.IRouter</a></div><div class="ttdoc">The classes, implementing this interface are used to store all the accessible endpoints and provides ...</div><div class="ttdef"><b>Definition:</b> <a href="IRouter_8cs_source.html#l00010">IRouter.cs:10</a></div></div>
<div class="ttc" id="classComparison__shopping__engine__backend_1_1HttpServer_html_a0d85429b6b5d8e7871a6c36e6333d6b2"><div class="ttname"><a href="classComparison__shopping__engine__backend_1_1HttpServer.html#a0d85429b6b5d8e7871a6c36e6333d6b2">Comparison_shopping_engine_backend.HttpServer.HttpServer</a></div><div class="ttdeci">HttpServer(IRouter _router)</div><div class="ttdef"><b>Definition:</b> <a href="HttpServer_8cs_source.html#l00022">HttpServer.cs:22</a></div></div>
<div class="ttc" id="namespaceSystem_html"><div class="ttname"><a href="namespaceSystem.html">System</a></div></div>
<div class="ttc" id="classComparison__shopping__engine__backend_1_1HttpServer_html_a77be4aee856814f246cf132013fa9819"><div class="ttname"><a href="classComparison__shopping__engine__backend_1_1HttpServer.html#a77be4aee856814f246cf132013fa9819">Comparison_shopping_engine_backend.HttpServer.router</a></div><div class="ttdeci">IRouter router</div><div class="ttdef"><b>Definition:</b> <a href="HttpServer_8cs_source.html#l00020">HttpServer.cs:20</a></div></div>
<div class="ttc" id="classComparison__shopping__engine__backend_1_1HttpServer_html_a5957aa0d15061f2c6b7145cca4139d83"><div class="ttname"><a href="classComparison__shopping__engine__backend_1_1HttpServer.html#a5957aa0d15061f2c6b7145cca4139d83">Comparison_shopping_engine_backend.HttpServer.Start</a></div><div class="ttdeci">async void Start()</div><div class="ttdoc">Starts the server and begins to listen. Is non-blocking. </div><div class="ttdef"><b>Definition:</b> <a href="HttpServer_8cs_source.html#l00042">HttpServer.cs:42</a></div></div>
<div class="ttc" id="classComparison__shopping__engine__backend_1_1HttpServer_html_a8ad4348ef0f9969025bab397e7e27e26"><div class="ttname"><a href="classComparison__shopping__engine__backend_1_1HttpServer.html#a8ad4348ef0f9969025bab397e7e27e26">Comparison_shopping_engine_backend.HttpServer.Dispose</a></div><div class="ttdeci">virtual void Dispose(bool disposing)</div><div class="ttdef"><b>Definition:</b> <a href="HttpServer_8cs_source.html#l00143">HttpServer.cs:143</a></div></div>
<div class="ttc" id="interfaceComparison__shopping__engine__backend_1_1IRouter_html_a9c5be4f0f9ea5e3b581a6bfcc959dd54"><div class="ttname"><a href="interfaceComparison__shopping__engine__backend_1_1IRouter.html#a9c5be4f0f9ea5e3b581a6bfcc959dd54">Comparison_shopping_engine_backend.IRouter.GetHandler</a></div><div class="ttdeci">Handler GetHandler(string endpoint, HttpMethod method)</div><div class="ttdoc">Returns a Callback that represents the functionality fot the given endpoint. </div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
